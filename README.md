# mini-react 第六天

react更新children子节点，课程中举例的场景都蛮简单，重要的是解题思路。

type类型不同删除老的，创建新的，删除的逻辑是将待删除项存放在一个数组中，commitWork创建之前进行删除逻辑，删除就是循环数组中待删除项，如果当前项有dom，直接找到它的父节点使用removeChild删除，否则递归调用删除当前项的sibling指针指向的兄弟节点。其中找父节点的逻辑，需要单独处理function component，while循环往上找存在parent.dom的一项。

老的比新的多，删除多余的。直接在处理字节点方法reconcileChildren中，将最后剩余的fiber塞入待删除数组中，就可以在最后统一提交时候，触发删除操作。

边缘情况的处理这节中，感觉有点难，对于出现的bug定位问题的能力不足，不能根据报错找到相关 代码进行调试。

优化更新中，逻辑理解上还是比较清晰的，找到开始节点和结束节点，确定更新范围。其中实现的关键，利用闭包缓存第一次的开始节点，闭包的面试题疯狂背还是第一次实际代码中使用到了。